<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="../bootstrap-5.1.3-dist/css/bootstrap.min.css">
    <!-- bootstrap 5 字体图标库 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <!-- jqury -->
    <script src="../jquery-3.6.0.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="../bootstrap-5.1.3-dist/js/bootstrap.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="col-md-2" style="position: absolute; font-size: 18px; font-weight: 300; text-align: right; padding: 20px 0;">
            <button id="btn1" type="button" class="btn btn-default" style="margin-bottom: 20px; border: solid 1px #66CCFF;">请假首页</button><br>
            <button id="btn2" type="button" class="btn btn-default" style="border: solid 1px #66CCFF;">请假详情</button>
            <!-- <button style="margin-bottom: 20px;">请假详情</button> -->
        </div>
        <div class="row col-md-8 offset-md-2" style="position: absolute; top: 20px;">
            <form class="qingjia">
                <div style="margin-bottom: 30px;">
                    <label style="width: 120px; text-align: right; font-size: 18px; letter-spacing: 10px;">院校</label>
                    <input class="col-md-8" type="text" name="" id="" required placeholder="请输入院系">
                </div>
                <div style="margin-bottom: 30px;">
                    <label style="width: 120px; text-align: right; font-size: 18px; letter-spacing: 10px;">专业</label>
                    <input class="col-md-8" type="text" name="" id="" required placeholder="请输入专业名称">
                </div>       
                <div style="margin-bottom: 30px;">
                    <label style="width: 120px; text-align: right; font-size: 18px; letter-spacing: 10px;">班级</label>
                    <input class="col-md-8" type="text" name="" id="" required placeholder="请输入班级">
                </div>     
                <div style="margin-bottom: 30px;">
                    <label style="width: 120px; text-align: right; font-size: 18px; letter-spacing: 10px;">姓名</label>
                    <input class="col-md-8" type="text" name="" id="" required readonly placeholder="请输入姓名">
                </div>         
                <div style="margin-bottom: 30px;">
                    <label style="width: 120px; text-align: right; font-size: 18px; letter-spacing: 10px;">学号</label>
                    <input class="col-md-8" type="text" name="" id="" required placeholder="请输入学号">
                </div>          
                <div style="margin-bottom: 30px;">
                    <label style="width: 120px; text-align: right; font-size: 18px; letter-spacing: 10px;">假因</label>
                    <input class="col-md-8" type="text" name="" id="" required placeholder="请输入假因">
                </div>               
                <div style="margin-bottom: 30px;">
                    <label style="width: 120px; text-align: right; font-size: 18px; letter-spacing: 10px;">辅导员</label>
                    <input class="col-md-8" type="text" name="" id="" required placeholder="请输入辅导员">
                </div>               
                <div style="margin-bottom: 30px;">
                    <label style="width: 120px; text-align: right; font-size: 18px; letter-spacing: 10px;">请假天数</label>
                    <input class="col-md-8" type="text" name="" id="" required readonly placeholder="请假天数 (此值无需手动输入)">
                </div>
                <div style="margin-bottom: 30px;">
                    <label style="width: 120px; text-align: right; font-size: 18px; letter-spacing: 10px;">请假时间</label>
                    <input class="col-md-8" type="date" name="" id="" required placeholder="请输入时间">
                </div>
                <div style="margin-bottom: 30px;">
                    <label style="width: 120px; text-align: right; font-size: 18px; letter-spacing: 10px;">返校时间</label>
                    <input class="col-md-8" type="date" name="" id="" onchange="Time()" required placeholder="请输入返校">
                </div>
                <div style="margin-bottom: 30px;">
                    <label style="width: 120px; text-align: right; font-size: 18px; letter-spacing: 10px;">联系电话</label>
                    <input class="col-md-8" type="number" name="" id="" required placeholder="请输入联系电话">
                </div>
                <div>
                    <label style="width: 120px; text-align: right; font-size: 18px; letter-spacing: 10px;">家长电话</label>
                    <input class="col-md-8" type="number" name="" id="" required placeholder="请输入家长电话">
                </div>
                <button class="btn btn-success offset-md-11" type="submit" id="submit" style="width: 150px; position: relative; top: -38px;">提交</button>
            </form>
            <div class="xiaojia" style="display: none;">
                <table class="table table-hover" style="text-align: center;">
                    <thead>
                      <tr>
                        <th>班级名称</th>
                        <th>学号</th>
                        <th>姓名</th>
                        <th>联系电话</th>
                        <th>请假日期</th>
                        <th>请假天数</th>
                        <th>情况说明</th>
                        <th>我已到校</th>
                        <th>状态</th>
                      </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>123</td>
                            <td>123</td>
                            <td>123</td>
                            <td>123</td>
                            <td>123</td>
                            <td>123</td>
                            <td>123</td>
                            <td>123</td>
                            <td>123</td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>
    </div>   
    
    <script>
        var qingjia = document.querySelector('.qingjia')
        var xiaojia = document.querySelector('.xiaojia')
        var btn1 = document.querySelector('#btn1')
        var btn2 = document.querySelector('#btn2')
        var input = document.querySelectorAll('input')
        var submit = document.querySelector('#submit')

        btn1.addEventListener('click',function(){
            xiaojia.style.display = 'none'
            qingjia.style.display = 'block'
        })

        btn2.addEventListener('click',function(){
            qingjia.style.display = 'none'
            xiaojia.style.display = 'block'
        })


        function Time(){
            if (input[8].value != '' && input[9].value != '') {
                var a=new Date(input[8].value);
                var b=new Date(input[9].value);
                var c=(b-a)/1000/60/60/24;
                console.log(c);
                input[7].value = c + '天'
            }else{
                input[9].value = ''
                alert("请先选择请假时间")
            }
        }


        submit.addEventListener('click',function(){
            if (input[10].value.length != 11 && input[11].value.length != 11) {
                console.log(('请输入11位手机号码'));
            }else{
                console.log('成功');
            }
        
            xhr = new XMLHttpRequest()
            xhr.open('post', '/http://localhost:8000/server1', true)
            xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded")
            console.log(xhr)
            xhr.send('value1' + input[1].value + 
                    '&value2=' + input[2].value  + 
                    '&value3=' + input[3].value + 
                    '&value4=' + input[4].value +
                    '&value5=' + input[5].value +
                    '&value6=' + input[6].value +
                    '&value7=' + input[7].value +
                    '&value8=' + input[8].value +
                    '&value9=' + input[9].value +
                    '&value10=' + input[10].value +
                    '&value11=' + input[11].value
                    );
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4) {
                    if (xhr.status == 200) {
                        input.values = ''
                        alert('提交成功')
                        window.location.reload()
                    }
                }
            }
        })





        

        
    </script>

</body>
</html>